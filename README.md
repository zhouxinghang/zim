## 模块

### im-server  

服务端模块。包括 imServer 和 httpServer，通过 netty 实现。im 通信序列化协议 Protocol 实现

### im-client 

客户端模块

### im-msg-box

消息管理模块，消息存储、消息查询

### im-common

公共模块

## 端口

### im 端口 11211

提供通信服务，消息发送、消息接收、心跳

### http 端口 80

业务相关，登录、查看消息、登出、注册等

## 流程

### 登录

客户端登录（http） --》  服务端返回长连接端口 --》 客户端连接服务端。一个通信链路建立完成

### 单发消息

#### 单 broker

客户端发送（im） --》 服务端发送消息给目标 client

#### 多 broker，分布式

客户端发送（im） --》 服务端找到发送方所在 broker --》 通知目标 broker 发送消息（http or rpc） --》 目标 broker 发送消息给目标 client
 
### 群发消息


## feature

### 必须

单发消息

登录、注销、注册

登录权限验证

心跳

服务端监控长连接

客户端自动重连


### 后续考虑

后台监控

分布式服务

群发消息

群组功能

消息加密

消息管理









